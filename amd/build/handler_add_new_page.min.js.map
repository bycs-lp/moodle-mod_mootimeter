{"version":3,"file":"handler_add_new_page.min.js","sources":["../src/handler_add_new_page.js"],"sourcesContent":["import { call as fetchMany } from 'core/ajax';\n\nexport const init = () => {\n\n    // Get all up elements.\n    var radios = document.getElementsByClassName('mtmt-tool-selector-list');\n\n    for (let i = 0; i < radios.length; i++) {\n        // Remove old listener if exists.\n        radios[i].removeEventListener(\"change\", store);\n        // Finally add the new listener.\n        radios[i].addEventListener(\"change\", store);\n    }\n\n    /**\n     * Create new page.\n     */\n    function store() {\n        var tool = this.dataset.name;\n        var instance = this.dataset.instance;\n\n        storeNewPage(tool, instance);\n    }\n};\n\n/**\n * Call to create a new instance\n * @param {string} tool\n * @param {int} instance\n * @returns\n */\nconst createNewPage = (\n    tool,\n    instance,\n) => fetchMany([{\n    methodname: 'mod_mootimeter_add_new_page',\n    args: {\n        tool,\n        instance,\n    },\n}])[0];\n\n/**\n * Executes the call to create a new page.\n * @param {string} tool\n * @param {int} instance\n */\nconst storeNewPage = async (tool, instance) => {\n    const response = await createNewPage(tool, instance);\n    // window.console.log(response);\n    // window.console.log(window.location.host);\n    // window.console.log(window.location);\n    window.location.href = window.location.origin + window.location.pathname + \"?id=\" + response.cmid + \"&pageid=\" + response.pageid;\n};"],"names":["radios","document","getElementsByClassName","i","length","removeEventListener","store","addEventListener","tool","this","dataset","name","instance","storeNewPage","async","response","methodname","args","createNewPage","window","location","href","origin","pathname","cmid","pageid"],"mappings":"0LAEoB,SAGZA,OAASC,SAASC,uBAAuB,+BAExC,IAAIC,EAAI,EAAGA,EAAIH,OAAOI,OAAQD,IAE/BH,OAAOG,GAAGE,oBAAoB,SAAUC,OAExCN,OAAOG,GAAGI,iBAAiB,SAAUD,gBAMhCA,YACDE,KAAOC,KAAKC,QAAQC,KACpBC,SAAWH,KAAKC,QAAQE,SAE5BC,aAAaL,KAAMI,kBA0BrBC,aAAeC,MAAON,KAAMI,kBACxBG,cAjBY,EAClBP,KACAI,YACC,cAAU,CAAC,CACZI,WAAY,8BACZC,KAAM,CACFT,KAAAA,KACAI,SAAAA,aAEJ,GAQuBM,CAAcV,KAAMI,UAI3CO,OAAOC,SAASC,KAAOF,OAAOC,SAASE,OAASH,OAAOC,SAASG,SAAW,OAASR,SAASS,KAAO,WAAaT,SAASU"}