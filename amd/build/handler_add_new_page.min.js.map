{"version":3,"file":"handler_add_new_page.min.js","sources":["../src/handler_add_new_page.js"],"sourcesContent":["import {call as fetchMany} from 'core/ajax';\r\nimport {execReloadPage as reloadPage} from 'mod_mootimeter/reload_page';\r\n\r\nexport const init = (uniqueID) => {\r\n    const obj = document.getElementById(uniqueID);\r\n\r\n    if (!document.getElementById(uniqueID)) {\r\n        return;\r\n    }\r\n    obj.addEventListener(\"mouseup\", store);\r\n\r\n    /**\r\n     * Create new page.\r\n     * @returns {mixed}\r\n     */\r\n    function store() {\r\n        const tool = this.dataset.name;\r\n        const instance = this.dataset.instance;\r\n\r\n        return storeNewPage(tool, instance);\r\n    }\r\n};\r\n\r\n/**\r\n * Call to create a new instance\r\n * @param {string} tool\r\n * @param {int} instance\r\n * @returns {mixed}\r\n */\r\nconst createNewPage = (\r\n    tool,\r\n    instance,\r\n) => fetchMany([{\r\n    methodname: 'mod_mootimeter_add_new_page',\r\n    args: {\r\n        tool,\r\n        instance,\r\n    },\r\n}])[0];\r\n\r\n/**\r\n * Executes the call to create a new page.\r\n * @param {string} tool\r\n * @param {int} instance\r\n */\r\nconst storeNewPage = async(tool, instance) => {\r\n    const response = await createNewPage(tool, instance);\r\n    reloadPage(response.pageid, response.cmid);\r\n\r\n    // Scroll to top if a new page is created.\r\n    document.getElementById(\"mootimeter-main-container\").scrollIntoView();\r\n};"],"names":["uniqueID","obj","document","getElementById","addEventListener","tool","this","dataset","name","instance","storeNewPage","async","response","methodname","args","createNewPage","pageid","cmid","scrollIntoView"],"mappings":"oOAGqBA,iBACXC,IAAMC,SAASC,eAAeH,UAE/BE,SAASC,eAAeH,WAG7BC,IAAIG,iBAAiB,4BAOXC,KAAOC,KAAKC,QAAQC,KACpBC,SAAWH,KAAKC,QAAQE,gBAEvBC,aAAaL,KAAMI,oBA0B5BC,aAAeC,MAAMN,KAAMI,kBACvBG,cAjBY,EAClBP,KACAI,YACC,cAAU,CAAC,CACZI,WAAY,8BACZC,KAAM,CACFT,KAAAA,KACAI,SAAAA,aAEJ,GAQuBM,CAAcV,KAAMI,0CAChCG,SAASI,OAAQJ,SAASK,MAGrCf,SAASC,eAAe,6BAA6Be"}