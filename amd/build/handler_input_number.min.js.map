{"version":3,"file":"handler_input_number.min.js","sources":["../src/handler_input_number.js"],"sourcesContent":["import {call as fetchMany} from 'core/ajax';\r\nimport Log from 'core/log';\r\nimport {execReloadPage as reloadPage} from 'mod_mootimeter/reload_page';\r\n\r\nexport const init = (uniqueID) => {\r\n    var up = document.getElementById('up_' + uniqueID);\r\n    var down = document.getElementById('down_' + uniqueID);\r\n\r\n    if (up) {\r\n        up.addEventListener(\"click\", countUp);\r\n    }\r\n\r\n    if (down) {\r\n        down.addEventListener(\"click\", countDown);\r\n    }\r\n\r\n    /**\r\n     * Count num input up.\r\n     */\r\n    function countUp() {\r\n        var id = this.dataset.id;\r\n        if (Math.floor(document.getElementById(id).dataset.min) <= Math.floor(document.getElementById(id).value) + 1) {\r\n            document.getElementById(id).value = Math.floor(document.getElementById(id).value) + 1;\r\n            store(this, id);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Count num input down.\r\n     */\r\n    function countDown() {\r\n        var id = this.dataset.id;\r\n        if (Math.floor(document.getElementById(id).dataset.min) <= Math.floor(document.getElementById(id).value) - 1) {\r\n            document.getElementById(id).value = Math.floor(document.getElementById(id).value) - 1;\r\n            store(this, id);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Store the value.\r\n     * @param {*} obj\r\n     * @param {*} id\r\n     */\r\n    function store(obj, id) {\r\n        var pageid = obj.dataset.pageid;\r\n        var ajaxmethode = obj.dataset.ajaxmethode;\r\n        var inputname = obj.dataset.name;\r\n        var inputvalue = document.getElementById(id).value;\r\n        var thisDataset = JSON.stringify(obj.dataset);\r\n        setINState(ajaxmethode, pageid, inputname, inputvalue, thisDataset);\r\n    }\r\n};\r\n\r\n/**\r\n * Executes the call to store cb state.\r\n * @param {string} ajaxmethode\r\n * @param {int} pageid\r\n * @param {string} inputname\r\n * @param {string} inputvalue\r\n * @param {string} thisDataset\r\n * @returns {mixed}\r\n */\r\nconst execSetINState = (\r\n    ajaxmethode,\r\n    pageid,\r\n    inputname,\r\n    inputvalue,\r\n    thisDataset\r\n) => fetchMany([{\r\n    methodname: ajaxmethode,\r\n    args: {\r\n        pageid,\r\n        inputname,\r\n        inputvalue,\r\n        thisDataset\r\n    },\r\n}])[0];\r\n\r\n/**\r\n * Store cb state.\r\n * @param {string} ajaxmethode\r\n * @param {int} pageid\r\n * @param {string} inputname\r\n * @param {string} inputvalue\r\n * @param {string} thisDataset\r\n */\r\nconst setINState = async(ajaxmethode, pageid, inputname, inputvalue, thisDataset) => {\r\n    const response = await execSetINState(ajaxmethode, pageid, inputname, inputvalue, thisDataset);\r\n    if (response.code != 200) {\r\n        Log.error(response.string);\r\n    }\r\n\r\n    if (response.code == 200) {\r\n        const queryString = window.location.search;\r\n        const urlParams = new URLSearchParams(queryString);\r\n        const cmid = urlParams.get('id');\r\n        reloadPage(pageid, cmid, thisDataset);\r\n    }\r\n};"],"names":["uniqueID","up","document","getElementById","down","store","obj","id","pageid","dataset","ajaxmethode","inputname","name","inputvalue","value","thisDataset","JSON","stringify","setINState","addEventListener","this","Math","floor","min","async","response","methodname","args","execSetINState","code","error","string","queryString","window","location","search","cmid","URLSearchParams","get"],"mappings":"8SAIqBA,eACbC,GAAKC,SAASC,eAAe,MAAQH,UACrCI,KAAOF,SAASC,eAAe,QAAUH,mBAqCpCK,MAAMC,IAAKC,QACZC,OAASF,IAAIG,QAAQD,OACrBE,YAAcJ,IAAIG,QAAQC,YAC1BC,UAAYL,IAAIG,QAAQG,KACxBC,WAAaX,SAASC,eAAeI,IAAIO,MACzCC,YAAcC,KAAKC,UAAUX,IAAIG,SACrCS,WAAWR,YAAaF,OAAQG,UAAWE,WAAYE,aAzCvDd,IACAA,GAAGkB,iBAAiB,wBAWhBZ,GAAKa,KAAKX,QAAQF,GAClBc,KAAKC,MAAMpB,SAASC,eAAeI,IAAIE,QAAQc,MAAQF,KAAKC,MAAMpB,SAASC,eAAeI,IAAIO,OAAS,IACvGZ,SAASC,eAAeI,IAAIO,MAAQO,KAAKC,MAAMpB,SAASC,eAAeI,IAAIO,OAAS,EACpFT,MAAMe,KAAMb,QAXhBH,MACAA,KAAKe,iBAAiB,wBAkBlBZ,GAAKa,KAAKX,QAAQF,GAClBc,KAAKC,MAAMpB,SAASC,eAAeI,IAAIE,QAAQc,MAAQF,KAAKC,MAAMpB,SAASC,eAAeI,IAAIO,OAAS,IACvGZ,SAASC,eAAeI,IAAIO,MAAQO,KAAKC,MAAMpB,SAASC,eAAeI,IAAIO,OAAS,EACpFT,MAAMe,KAAMb,eAoDlBW,WAAaM,MAAMd,YAAaF,OAAQG,UAAWE,WAAYE,qBAC3DU,cAzBa,EACnBf,YACAF,OACAG,UACAE,WACAE,eACC,cAAU,CAAC,CACZW,WAAYhB,YACZiB,KAAM,CACFnB,OAAAA,OACAG,UAAAA,UACAE,WAAAA,WACAE,YAAAA,gBAEJ,GAWuBa,CAAelB,YAAaF,OAAQG,UAAWE,WAAYE,gBAC7D,KAAjBU,SAASI,mBACLC,MAAML,SAASM,QAGF,KAAjBN,SAASI,KAAa,OAChBG,YAAcC,OAAOC,SAASC,OAE9BC,KADY,IAAIC,gBAAgBL,aACfM,IAAI,sCAChB9B,OAAQ4B,KAAMrB"}