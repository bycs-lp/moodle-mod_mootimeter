define("mod_mootimeter/newpage",["exports","core/modal_factory","core/modal_events","core/templates","core/str","mod_mootimeter/toolmanager","core/ajax","core/notification"],(function(_exports,_modal_factory,_modal_events,_templates,_str,_toolmanager,_ajax,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * A cool tool Manager.
   *
   * @module     mod_mootimeter/newpage
   * @copyright  2023 Justus Dieckmann WWU
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.handleNewPage=async function(){const html=_templates.default.render("mod_mootimeter/settings/select",{name:"choosepagetype",id:"id_choosepagetype",label:"",options:Object.entries(_toolmanager.ToolManager.tools).map((_ref=>{let[key,{label:label}]=_ref;return{value:key,label:label}}))}),modal=await _modal_factory.default.create({type:_modal_factory.default.types.SAVE_CANCEL,title:await(0,_str.get_string)("choosepagetype","mod_mootimeter"),body:html});modal.getRoot().on(_modal_events.default.save,(async e=>{const tool=e.currentTarget.querySelector("#id_choosepagetype").value;await async function(tool){const{pageid:pageid}=await _ajax.default.call([{methodname:"mod_mootimeter_create_page",args:{instanceid:_toolmanager.ToolManager.instanceid,tool:tool},fail:_notification.default.exception}])[0];window.location.search="?pageid="+pageid}(tool)})),modal.show()},_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_templates=_interopRequireDefault(_templates),_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification)}));

//# sourceMappingURL=newpage.min.js.map