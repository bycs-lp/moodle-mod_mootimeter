{"version":3,"file":"toggle_teacherpermission.min.js","sources":["../src/toggle_teacherpermission.js"],"sourcesContent":["import {call as fetchMany} from 'core/ajax';\nimport {get_string as getString} from 'core/str';\nimport Log from 'core/log';\n\nexport const init = (uniqueID) => {\n    var obj = document.getElementById(uniqueID);\n\n    if (!document.getElementById(uniqueID)) {\n        return;\n    }\n\n    obj.addEventListener(\"click\", toggleteacherpermission);\n\n    /**\n     * Store the value.\n     */\n    function toggleteacherpermission() {\n        var pageid = this.dataset.pageid;\n        var uniqueID = this.dataset.iconid;\n\n        exectoggleteacherpermission(pageid, uniqueID);\n    }\n};\n\n/**\n * Call to store input value\n * @param {int} pageid\n * @returns\n */\nconst storeInputValue = (\n    pageid\n) => fetchMany([{\n    methodname: 'mod_mootimeter_toggle_teacherpermission',\n    args: {\n        pageid\n    },\n}])[0];\n\n/**\n * Executes the call to store input value.\n * @param {int} pageid\n * @param {string} uniqueID\n */\nconst exectoggleteacherpermission = async(pageid, uniqueID) => {\n    const response = await storeInputValue(pageid);\n    if (response.code != 200) {\n        Log.error(response.string);\n    }\n    if (response.code == 200) {\n        Log.info(response.string);\n        document.getElementById(uniqueID).classList.remove('fa-eye');\n        document.getElementById(uniqueID).classList.remove('fa-eye-slash');\n\n        const element = document.getElementById(uniqueID);\n\n        if (response.newstate == 1) {\n            const tooltipTeacherpermDisabled = await getString('tooltip_content_menu_teacherpermission_disabled', 'mod_mootimeter');\n            element.classList.add('fa-eye');\n            document.getElementById('toggleteacherpermission').setAttribute('data-original-title', tooltipTeacherpermDisabled);\n        }\n\n        if (response.newstate != 1) {\n            const tooltipTeacherpermission = await getString('tooltip_content_menu_teacherpermission', 'mod_mootimeter');\n            element.classList.add('fa-eye-slash');\n            document.getElementById('toggleteacherpermission').setAttribute('data-original-title', tooltipTeacherpermission);\n        }\n\n        // To force the webservice to pull all results.\n        const nodelastupdated = document.getElementById('mootimeterstate');\n        nodelastupdated.setAttribute('data-lastupdated', 0);\n\n    }\n};"],"names":["uniqueID","obj","document","getElementById","addEventListener","pageid","this","dataset","iconid","exectoggleteacherpermission","async","response","methodname","args","storeInputValue","code","error","string","info","classList","remove","element","newstate","tooltipTeacherpermDisabled","add","setAttribute","tooltipTeacherpermission"],"mappings":"wRAIqBA,eACbC,IAAMC,SAASC,eAAeH,UAE7BE,SAASC,eAAeH,WAI7BC,IAAIG,iBAAiB,wBAMbC,OAASC,KAAKC,QAAQF,OACtBL,SAAWM,KAAKC,QAAQC,OAE5BC,4BAA4BJ,OAAQL,oBAuBtCS,4BAA8BC,MAAML,OAAQL,kBACxCW,cAdNN,UACC,cAAU,CAAC,CACZO,WAAY,0CACZC,KAAM,CACFR,kBAEJ,GAQuBS,CAAgBT,WAClB,KAAjBM,SAASI,mBACLC,MAAML,SAASM,QAEF,KAAjBN,SAASI,KAAa,cAClBG,KAAKP,SAASM,QAClBf,SAASC,eAAeH,UAAUmB,UAAUC,OAAO,UACnDlB,SAASC,eAAeH,UAAUmB,UAAUC,OAAO,sBAE7CC,QAAUnB,SAASC,eAAeH,aAEf,GAArBW,SAASW,SAAe,OAClBC,iCAAmC,mBAAU,kDAAmD,kBACtGF,QAAQF,UAAUK,IAAI,UACtBtB,SAASC,eAAe,2BAA2BsB,aAAa,sBAAuBF,+BAGlE,GAArBZ,SAASW,SAAe,OAClBI,+BAAiC,mBAAU,yCAA0C,kBAC3FL,QAAQF,UAAUK,IAAI,gBACtBtB,SAASC,eAAe,2BAA2BsB,aAAa,sBAAuBC,0BAInExB,SAASC,eAAe,mBAChCsB,aAAa,mBAAoB"}