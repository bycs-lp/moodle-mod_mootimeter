define("mod_mootimeter/handle_button_clicked",["exports","core/ajax","core/log","core/modal_save_cancel","core/modal_delete_cancel","core/modal_events","core/str","mod_mootimeter/reload_page"],(function(_exports,_ajax,_log,_modal_save_cancel,_modal_delete_cancel,_modal_events,_str,_reload_page){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_log=_interopRequireDefault(_log),_modal_save_cancel=_interopRequireDefault(_modal_save_cancel),_modal_delete_cancel=_interopRequireDefault(_modal_delete_cancel),_modal_events=_interopRequireDefault(_modal_events);_exports.init=async uniqueID=>{var obj=document.getElementById(uniqueID);if(!document.getElementById(uniqueID))return;obj.addEventListener("click",(function(){modal.show()}));const pageid=document.getElementById("mootimeterstate").dataset.pageid;var confirmationTitleStr,confirmationQuestionStr,modal,dataset=obj.dataset;if(confirmationTitleStr=obj.getAttribute("data-confirmationtitlestr")?dataset.confirmationtitlestr:(0,_str.get_string)("delete","core"),confirmationQuestionStr=obj.getAttribute("data-confirmationquestionstr")?dataset.confirmationquestionstr:(0,_str.get_string)("areyousure"),obj.getAttribute("data-confirmationtype")){switch(dataset.confirmationtype){case"DELETE_CANCEL":modal=await _modal_delete_cancel.default.create({title:confirmationTitleStr,body:confirmationQuestionStr,pageid:pageid});break;case"SAVE_CANCEL":modal=await _modal_save_cancel.default.create({title:confirmationTitleStr,body:confirmationQuestionStr,pageid:pageid})}modal.getRoot().on(_modal_events.default.delete,(function(){var uniqueID=obj.id,ajaxmethode=obj.dataset.ajaxmethode;buttonClickedHandle(pageid,uniqueID,ajaxmethode)})),modal.getRoot().on(_modal_events.default.save,(function(){var uniqueID=obj.id,ajaxmethode=obj.dataset.ajaxmethode;buttonClickedHandle(pageid,uniqueID,ajaxmethode)}))}else window.console.log("No confirmationtype specified! Abort!")};const buttonClickedHandle=async(pageid,uniqueID,ajaxmethode)=>{var dataset=JSON.stringify(document.getElementById(uniqueID).dataset);const response=await((pageid,thisDataset,ajaxmethode)=>(0,_ajax.call)([{methodname:ajaxmethode,args:{pageid:pageid,thisDataset:thisDataset}}])[0])(pageid,dataset,ajaxmethode);if(200!=response.code&&_log.default.error(response.string),1==response.reload){const queryString=window.location.search,urlParams=new URLSearchParams(queryString);(0,_reload_page.execReloadPage)(urlParams.get("pageid"),urlParams.get("id"))}}}));

//# sourceMappingURL=handle_button_clicked.min.js.map