define("mod_mootimeter/delete_page",["exports","core/ajax","core/log","core/modal_delete_cancel","core/modal_events","core/str","mod_mootimeter/reload_page","mod_mootimeter/utils"],(function(_exports,_ajax,_log,_modal_delete_cancel,_modal_events,_str,_reload_page,_utils){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_log=_interopRequireDefault(_log),_modal_delete_cancel=_interopRequireDefault(_modal_delete_cancel),_modal_events=_interopRequireDefault(_modal_events);_exports.init=async id=>{const pageid=document.getElementById("mootimeterstate").dataset.pageid,modal=await _modal_delete_cancel.default.create({title:(0,_str.get_string)("delete","core"),body:(0,_str.get_string)("areyousure")});modal.getRoot().on(_modal_events.default.delete,(function(){execDeletePage(pageid)})),document.getElementById(id).addEventListener("click",(()=>{modal.show()}));const execDeletePage=async pageid=>{var mtmstate=document.getElementById("mootimeterstate");const response=await(pageid=>(0,_ajax.call)([{methodname:"mod_mootimeter_delete_page",args:{pageid:pageid}}])[0])(pageid);200==response.code?((0,_utils.removeGetParam)("pageid",window.location.href),mtmstate.setAttribute("data-pageid",0),(0,_reload_page.execReloadPage)(0,response.cmid)):_log.default.error(response.string)}}}));

//# sourceMappingURL=delete_page.min.js.map