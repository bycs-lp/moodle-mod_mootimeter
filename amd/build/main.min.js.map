{"version":3,"file":"main.min.js","sources":["../src/main.js"],"sourcesContent":["import {call as fetchMany} from 'core/ajax';\nimport Log from 'core/log';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport {get_string as getString} from 'core/str';\n\nexport const init = async() => {\n    var addnewpagebtn = document.getElementById(\"mootimeter_addpage\");\n    if (addnewpagebtn) {\n        addnewpagebtn.addEventListener('click', function() {\n            const cmid = this.dataset.cmid;\n            location.href = 'view.php?id=' + cmid + \"&a=addpage\";\n        });\n    }\n\n    const modal = await ModalFactory.create({\n        type: ModalFactory.types.DELETE_CANCEL,\n        title: getString('delete', 'core'),\n        body: getString('areyousure'),\n        pageid: 5,\n    });\n\n    modal.getRoot().on(ModalEvents.delete, function() {\n        var pageid = document.getElementById(\"btn-delete_page\").dataset.pageid;\n        execDeletePage(pageid);\n    });\n\n    var deletebtns = document.getElementsByClassName(\"mootimeter-delete-page-btn\");\n    if (deletebtns) {\n        Array.from(deletebtns).forEach((element) => {\n            element.addEventListener('click', () => {\n                modal.show();\n            });\n        });\n    }\n\n    /**\n     * Call to store input value\n     * @param {int} pageid\n     * @returns\n     */\n    const deletePageCall = (\n        pageid,\n    ) => fetchMany([{\n        methodname: 'mod_mootimeter_delete_page',\n        args: {\n            pageid\n        },\n    }])[0];\n\n    /**\n     * Executes the call to store input value.\n     * @param {int} pageid\n     */\n    const execDeletePage = async(pageid) => {\n        const response = await deletePageCall(pageid);\n        if (response.code != 200) {\n            Log.error(response.string);\n            return;\n        }\n\n        window.location.href = window.location.origin\n            + window.location.pathname + \"?id=\" + response.cmid;\n    };\n};\n"],"names":["async","addnewpagebtn","document","getElementById","addEventListener","cmid","this","dataset","location","href","modal","ModalFactory","create","type","types","DELETE_CANCEL","title","body","pageid","getRoot","on","ModalEvents","delete","execDeletePage","deletebtns","getElementsByClassName","Array","from","forEach","element","show","response","methodname","args","deletePageCall","code","window","origin","pathname","error","string"],"mappings":"8eAMoBA,cACZC,cAAgBC,SAASC,eAAe,sBACxCF,eACAA,cAAcG,iBAAiB,SAAS,iBAC9BC,KAAOC,KAAKC,QAAQF,KAC1BG,SAASC,KAAO,eAAiBJ,KAAO,sBAI1CK,YAAcC,uBAAaC,OAAO,CACpCC,KAAMF,uBAAaG,MAAMC,cACzBC,OAAO,mBAAU,SAAU,QAC3BC,MAAM,mBAAU,cAChBC,OAAQ,IAGZR,MAAMS,UAAUC,GAAGC,sBAAYC,QAAQ,eAC/BJ,OAAShB,SAASC,eAAe,mBAAmBI,QAAQW,OAChEK,eAAeL,eAGfM,WAAatB,SAASuB,uBAAuB,8BAC7CD,YACAE,MAAMC,KAAKH,YAAYI,SAASC,UAC5BA,QAAQzB,iBAAiB,SAAS,KAC9BM,MAAMoB,mBAuBZP,eAAiBvB,qBACb+B,cAbNb,UACC,cAAU,CAAC,CACZc,WAAY,6BACZC,KAAM,CACFf,kBAEJ,GAOuBgB,CAAehB,QACjB,KAAjBa,SAASI,KAKbC,OAAO5B,SAASC,KAAO2B,OAAO5B,SAAS6B,OACjCD,OAAO5B,SAAS8B,SAAW,OAASP,SAAS1B,kBAL3CkC,MAAMR,SAASS,OAIvB,CAPJ"}