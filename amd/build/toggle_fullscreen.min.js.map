{"version":3,"file":"toggle_fullscreen.min.js","sources":["../src/toggle_fullscreen.js"],"sourcesContent":["import {execReloadPage as reloadPage} from 'mod_mootimeter/reload_page';\n\n\nexport const init = (ids) => {\n\n    if (!document.getElementById(ids[0])) {\n        return;\n    }\n    const button = document.getElementById(ids[0]);\n\n    button.addEventListener(\"click\", function() {\n\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        const fullscreenstate = urlParams.get('f');\n\n        if (fullscreenstate == 0) {\n            setGetParam('f', 1);\n        } else {\n            setGetParam('f', 0);\n        }\n\n        var datasetobj = this.dataset;\n        Object.assign(datasetobj, getParams());\n\n        reloadPage(this.dataset.pageid, this.dataset.cmid, datasetobj);\n\n    });\n};\n\n/**\n * Set the Query Parameter.\n * @param {string} key\n * @param {string} value\n */\nfunction setGetParam(key, value) {\n    if (history.pushState) {\n        var params = new URLSearchParams(window.location.search);\n        params.set(key, value);\n        var newUrl = window.location.origin\n            + window.location.pathname\n            + '?' + params.toString();\n        window.history.pushState({path: newUrl}, '', newUrl);\n    }\n}\n\n/**\n * Get an array of all url search params.\n * @param {string} url\n * @returns {array}\n */\nfunction getParams(url = window.location) {\n    // Create a params object\n    let params = {};\n    new URL(url).searchParams.forEach(function(val, key) {\n        params[key] = val;\n    });\n    return params;\n}\n"],"names":["setGetParam","key","value","history","pushState","params","URLSearchParams","window","location","search","set","newUrl","origin","pathname","toString","path","ids","document","getElementById","addEventListener","queryString","get","datasetobj","this","dataset","Object","assign","url","URL","searchParams","forEach","val","getParams","pageid","cmid"],"mappings":"0MAmCSA,YAAYC,IAAKC,UAClBC,QAAQC,UAAW,KACfC,OAAS,IAAIC,gBAAgBC,OAAOC,SAASC,QACjDJ,OAAOK,IAAIT,IAAKC,WACZS,OAASJ,OAAOC,SAASI,OACvBL,OAAOC,SAASK,SAChB,IAAMR,OAAOS,WACnBP,OAAOJ,QAAQC,UAAU,CAACW,KAAMJ,QAAS,GAAIA,uBAvChCK,UAEZC,SAASC,eAAeF,IAAI,WAGlBC,SAASC,eAAeF,IAAI,IAEpCG,iBAAiB,SAAS,iBAEvBC,YAAcb,OAAOC,SAASC,OAKhCT,YAAY,IADO,GAHL,IAAIM,gBAAgBc,aACJC,IAAI,KAGjB,EAEA,OAGjBC,WAAaC,KAAKC,QACtBC,OAAOC,OAAOJ,0BA4BHK,2DAAMpB,OAAOC,SAExBH,OAAS,cACTuB,IAAID,KAAKE,aAAaC,SAAQ,SAASC,IAAK9B,KAC5CI,OAAOJ,KAAO8B,OAEX1B,OAlCuB2B,oCAEfT,KAAKC,QAAQS,OAAQV,KAAKC,QAAQU,KAAMZ"}