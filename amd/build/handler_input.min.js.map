{"version":3,"file":"handler_input.min.js","sources":["../src/handler_input.js"],"sourcesContent":["import {call as fetchMany} from 'core/ajax';\r\nimport Log from 'core/log';\r\nimport {exception as displayException} from 'core/notification';\r\n\r\nexport const init = (uniqueID) => {\r\n    const obj = document.getElementById(uniqueID);\r\n\r\n    if (!document.getElementById(uniqueID)) {\r\n        return;\r\n    }\r\n\r\n    obj.addEventListener(\"focusin\", mootimeterlockstore);\r\n\r\n    obj.addEventListener(\"focusout\", mootimeterStoreInput);\r\n\r\n    /**\r\n     * Store the value.\r\n     * @returns {mixed}\r\n     */\r\n    function mootimeterStoreInput() {\r\n        const id = obj.id;\r\n        const pageid = obj.dataset.pageid;\r\n        const ajaxmethode = obj.dataset.ajaxmethode;\r\n        const inputname = obj.dataset.name;\r\n        const inputvalue = document.getElementById(id).value;\r\n        const thisDataset = JSON.stringify(obj.dataset);\r\n\r\n        var mtmstate = document.getElementById('mootimeterstate');\r\n        delete mtmstate.dataset.lockpagereload;\r\n\r\n        return execStoreInputValue(ajaxmethode, pageid, inputname, inputvalue, thisDataset);\r\n    }\r\n\r\n    /**\r\n     * Callback to lock pagereload until focusout event is triggered.\r\n     */\r\n    function mootimeterlockstore() {\r\n        var mtmstate = document.getElementById('mootimeterstate');\r\n        mtmstate.setAttribute('data-lockpagereload', 1);\r\n    }\r\n};\r\n\r\n/**\r\n * Call to store input value\r\n * @param {string} ajaxmethode\r\n * @param {int} pageid\r\n * @param {string} inputname\r\n * @param {string} inputvalue\r\n * @param {string} thisDataset\r\n * @returns {mixed}\r\n */\r\nconst storeInputValue = (\r\n    ajaxmethode,\r\n    pageid,\r\n    inputname,\r\n    inputvalue,\r\n    thisDataset\r\n) => fetchMany([{\r\n    methodname: ajaxmethode,\r\n    args: {\r\n        pageid,\r\n        inputname,\r\n        inputvalue,\r\n        thisDataset\r\n    },\r\n}])[0];\r\n\r\n/**\r\n * Executes the call to store input value.\r\n * @param {string} ajaxmethode\r\n * @param {int} pageid\r\n * @param {string} inputname\r\n * @param {string} inputvalue\r\n * @param {string} thisDataset\r\n */\r\nconst execStoreInputValue = async(ajaxmethode, pageid, inputname, inputvalue, thisDataset) => {\r\n    let response = null;\r\n    try {\r\n        response = await storeInputValue(ajaxmethode, pageid, inputname, inputvalue, thisDataset);\r\n    } catch (err) {\r\n        displayException(err);\r\n    }\r\n    if (response.code != 200) {\r\n        Log.error(response.string);\r\n    }\r\n    if (response.code == 200) {\r\n        Log.info(response.string);\r\n    }\r\n};\r\n"],"names":["uniqueID","obj","document","getElementById","addEventListener","setAttribute","id","pageid","dataset","ajaxmethode","inputname","name","inputvalue","value","thisDataset","JSON","stringify","lockpagereload","execStoreInputValue","async","response","methodname","args","storeInputValue","err","code","error","string","info"],"mappings":"+RAIqBA,iBACXC,IAAMC,SAASC,eAAeH,UAE/BE,SAASC,eAAeH,YAI7BC,IAAIG,iBAAiB,sBA0BFF,SAASC,eAAe,mBAC9BE,aAAa,sBAAuB,MAzBjDJ,IAAIG,iBAAiB,6BAOXE,GAAKL,IAAIK,GACTC,OAASN,IAAIO,QAAQD,OACrBE,YAAcR,IAAIO,QAAQC,YAC1BC,UAAYT,IAAIO,QAAQG,KACxBC,WAAaV,SAASC,eAAeG,IAAIO,MACzCC,YAAcC,KAAKC,UAAUf,IAAIO,uBAExBN,SAASC,eAAe,mBACvBK,QAAQS,eAEjBC,oBAAoBT,YAAaF,OAAQG,UAAWE,WAAYE,wBA6CzEI,oBAAsBC,MAAMV,YAAaF,OAAQG,UAAWE,WAAYE,mBACtEM,SAAW,SAEXA,cA3BgB,EACpBX,YACAF,OACAG,UACAE,WACAE,eACC,cAAU,CAAC,CACZO,WAAYZ,YACZa,KAAM,CACFf,OAAAA,OACAG,UAAAA,UACAE,WAAAA,WACAE,YAAAA,gBAEJ,GAaqBS,CAAgBd,YAAaF,OAAQG,UAAWE,WAAYE,aAC/E,MAAOU,iCACYA,KAEA,KAAjBJ,SAASK,mBACLC,MAAMN,SAASO,QAEF,KAAjBP,SAASK,mBACLG,KAAKR,SAASO"}