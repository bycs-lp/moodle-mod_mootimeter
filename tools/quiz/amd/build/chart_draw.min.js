define("mootimetertool_quiz/chart_draw",["exports","mootimetertool_quiz/chart.umd","core/ajax"],(function(_exports,_chart,_ajax){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_chart=(obj=_chart)&&obj.__esModule?obj:{default:obj};_exports.init=()=>{var pageid=document.getElementById("mtmt_quiz_canvas").dataset.pageid;setInterval((function(){var lastposttimestamp=parseInt(document.getElementById("mootimeterstate").dataset.lastupdated);getAnswers(pageid,lastposttimestamp)}),1e3)};const getAnswers=async(pageid,lastposttimestamp)=>{const response=await(pageid=>(0,_ajax.call)([{methodname:"mootimetertool_quiz_get_answers",args:{pageid:pageid}}])[0])(pageid);if(lastposttimestamp==response.lastupdated&&response.chartsettings==document.getElementById("mtmt_quiz_canvas").dataset.chartsettings&&response.values==document.getElementById("mtmt_quiz_canvas").dataset.values&&response.labels==document.getElementById("mtmt_quiz_canvas").dataset.labels)return;window.console.log(document.getElementById("mtmt_quiz_canvas").dataset.values),window.console.log(response.values),document.getElementById("mootimeterstate").setAttribute("data-lastupdated",response.lastupdated);let nodecanvas=document.getElementById("mtmt_quiz_canvas");nodecanvas.setAttribute("data-labels",response.labels),nodecanvas.setAttribute("data-values",response.values),nodecanvas.setAttribute("data-chartsettings",response.chartsettings),window.console.log(response);var config={type:JSON.parse(response.chartsettings).charttype,data:{labels:JSON.parse(response.labels),datasets:[{label:response.question,data:JSON.parse(response.values),backgroundColor:JSON.parse(response.chartsettings).backgroundColor,borderRadius:JSON.parse(response.chartsettings).borderRadius}]},options:JSON.parse(response.chartsettings).options};let chartStatus=_chart.default.getChart("mtmt_quiz_canvas");null!=chartStatus&&chartStatus.destroy(),new _chart.default(document.getElementById("mtmt_quiz_canvas"),config),_chart.default.defaults.font.size=25,_chart.default.defaults.stepSize=1}}));

//# sourceMappingURL=chart_draw.min.js.map