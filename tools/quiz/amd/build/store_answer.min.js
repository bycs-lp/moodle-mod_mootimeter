define("mootimetertool_quiz/store_answer",["exports","core/ajax","core/notification","core/str","core/templates","core/log"],(function(_exports,_ajax,_notification,_str,_templates,_log){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=_interopRequireDefault(_templates),_log=_interopRequireDefault(_log);_exports.init=()=>{const submitbtn=document.getElementById("mtmt_store_answer");submitbtn&&submitbtn.addEventListener("click",(function(){const selectedanswerids=[],pageid=this.dataset.pageid,checkboxes=document.getElementsByName("multipleanswers[]");for(const checkbox of checkboxes)checkbox.checked&&selectedanswerids.push(checkbox.value);return storeAnswer(pageid,selectedanswerids)}))};const storeAnswer=async(pageid,selectedanswerids)=>{selectedanswerids=JSON.stringify(selectedanswerids);const successString=await(0,_str.get_string)("notification_success_store_answer","mod_mootimeter"),response=await((pageid,aoids)=>(0,_ajax.call)([{methodname:"mootimetertool_quiz_store_answer",args:{pageid:pageid,aoids:aoids}}])[0])(pageid,selectedanswerids);200!=response.code&&_log.default.error(response.string),200==response.code&&function(notificationType,notificationString,icon){const context={notification_id:"mtmt_answer_warning",notification_type:notificationType,notification_icon:icon,notification_text:notificationString};_templates.default.renderForPromise("mod_mootimeter/elements/snippet_notification",context).then((_ref=>{let{html:html,js:js}=_ref;return _templates.default.appendNodeContents("#mtmt_tool-colct-header",html,js),!0})).catch((error=>(0,_notification.exception)(error)))}("success",successString,"")}}));

//# sourceMappingURL=store_answer.min.js.map