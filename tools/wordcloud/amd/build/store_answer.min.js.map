{"version":3,"file":"store_answer.min.js","sources":["../src/store_answer.js"],"sourcesContent":["import Ajax from 'core/ajax';\nimport { exception as displayException } from 'core/notification';\nimport Templates from 'core/templates';\nimport notification from 'core/notification';\n\nexport const init = () => {\n\n    // Register event to input box.\n    document.getElementById('mootimeter_type_answer').addEventListener(\"keyup\", function (event) {\n        if (event.code === 'Enter' || event.code === 'NumpadEnter') {\n            store_answer(event);\n        }\n    });\n    document.getElementById('mootimeter_enter_answer').addEventListener(\"click\", function (event) {\n        store_answer(event);\n    });\n\n    function store_answer(event) {\n        var pageid = document.getElementById('mootimeter_type_answer').dataset.pageid;\n        var answer = document.getElementById('mootimeter_type_answer').value;\n\n        const context = {\n            answer: answer\n        };\n\n        // Add the answer to the Badges list.\n        Templates.renderForPromise('mod_mootimeter/badge_answer', context)\n            .then(({ html, js }) => {\n                Templates.appendNodeContents('#mtmt_wordcloud_badges', html, js);\n                return true;\n            })\n            .catch((error) => displayException(error));\n\n        // Send the answer to server.\n        Ajax.call([{\n            methodname: 'mootimetertool_wordcloud_store_answer',\n            args: { pageid: pageid, answer: answer },\n            fail: notification.exception,\n        }]);\n\n        // Empty the input field after post.\n        document.getElementById('mootimeter_type_answer').value = \"\";\n\n        return;\n    }\n};\n"],"names":["store_answer","event","pageid","document","getElementById","dataset","answer","value","context","renderForPromise","then","_ref","html","js","appendNodeContents","catch","error","call","methodname","args","fail","notification","exception","addEventListener","code"],"mappings":"21CAKoB,cAYPA,aAAaC,WACdC,OAASC,SAASC,eAAe,0BAA0BC,QAAQH,OACnEI,OAASH,SAASC,eAAe,0BAA0BG,YAEzDC,QAAU,CACZF,OAAQA,2BAIFG,iBAAiB,8BAA+BD,SACrDE,MAAKC,WAACC,KAAEA,KAAFC,GAAQA,mCACDC,mBAAmB,yBAA0BF,KAAMC,KACtD,KAEVE,OAAOC,QAAU,2BAAiBA,uBAGlCC,KAAK,CAAC,CACPC,WAAY,wCACZC,KAAM,CAAEjB,OAAQA,OAAQI,OAAQA,QAChCc,KAAMC,sBAAaC,aAIvBnB,SAASC,eAAe,0BAA0BG,MAAQ,GAjC9DJ,SAASC,eAAe,0BAA0BmB,iBAAiB,SAAS,SAAUtB,OAC/D,UAAfA,MAAMuB,MAAmC,gBAAfvB,MAAMuB,MAChCxB,aAAaC,UAGrBE,SAASC,eAAe,2BAA2BmB,iBAAiB,SAAS,SAAUtB,OACnFD,aAAaC"}