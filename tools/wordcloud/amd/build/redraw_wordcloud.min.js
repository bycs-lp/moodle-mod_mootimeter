define("mootimetertool_wordcloud/redraw_wordcloud",["exports","core/ajax","core/notification","mootimetertool_wordcloud/wordcloud2"],(function(_exports,_ajax,_notification,_wordcloud){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification),_wordcloud=_interopRequireDefault(_wordcloud);_exports.init=()=>{function redrawwordcloud(){let mtmtcanvas=document.getElementById("wordcloudcanvas"),answers=JSON.parse(mtmtcanvas.dataset.answers);(0,_wordcloud.default)(mtmtcanvas,{list:answers,weightFactor:24,color:"#f98012",fontFamily:"OpenSans"})}setInterval((function(){var pageid=document.getElementById("wordcloudcanvas").dataset.pageid,lastposttimestamp=document.getElementById("mootimeterstate").dataset.lastupdated;_ajax.default.call([{methodname:"mootimetertool_wordcloud_get_answers",args:{pageid:pageid,lastupdated:0},fail:_notification.default.exception}])[0].then((function(results){if(results.lastupdated==lastposttimestamp)return;document.getElementById("mootimeterstate").setAttribute("data-lastupdated",results.lastupdated),document.getElementById("wordcloudcanvas").setAttribute("data-answers",JSON.stringify(results.answerlist)),document.getElementById("wordcloudcanvas").dispatchEvent(new Event("redrawwordcloud"))})).fail()}),1e3),redrawwordcloud(),new Event("redrawwordcloud"),document.getElementById("wordcloudcanvas").addEventListener("redrawwordcloud",(()=>{redrawwordcloud()}),!1)}}));

//# sourceMappingURL=redraw_wordcloud.min.js.map