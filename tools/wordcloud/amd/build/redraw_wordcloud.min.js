define("mootimetertool_wordcloud/redraw_wordcloud",["exports","core/ajax","mootimetertool_wordcloud/wordcloud2"],(function(_exports,_ajax,_wordcloud){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_wordcloud=(obj=_wordcloud)&&obj.__esModule?obj:{default:obj};_exports.init=()=>{setInterval((function(){getAnswers()}),1e3)};const getAnswers=async()=>{var pageid=document.getElementById("wordcloudcanvas").dataset.pageid,lastposttimestamp=document.getElementById("mootimeterstate").dataset.lastupdated;const response=await((pageid,lastupdated)=>(0,_ajax.call)([{methodname:"mootimetertool_wordcloud_get_answers",args:{pageid:pageid,lastupdated:lastupdated}}])[0])(pageid,lastposttimestamp);if(console.log([response.lastupdated,lastposttimestamp]),response.lastupdated==lastposttimestamp)return;document.getElementById("mootimeterstate").setAttribute("data-lastupdated",response.lastupdated),document.getElementById("wordcloudcanvas").setAttribute("data-answers",JSON.stringify(response.answerlist)),console.log(JSON.stringify(response.answerlist)),function(){console.log("Redraw");let mtmtcanvas=document.getElementById("wordcloudcanvas"),answers=JSON.parse(mtmtcanvas.dataset.answers);console.log(answers),(0,_wordcloud.default)(mtmtcanvas,{list:answers,weightFactor:24,color:"#f98012",fontFamily:"OpenSans"})}()}}));

//# sourceMappingURL=redraw_wordcloud.min.js.map